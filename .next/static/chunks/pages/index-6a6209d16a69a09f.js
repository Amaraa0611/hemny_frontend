(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{3792:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(8293)}])},8293:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>w});var a=t(4848),r=t(3738);let l=()=>(0,a.jsxs)("section",{className:"relative overflow-hidden bg-white min-h-[600px]",children:[(0,a.jsxs)("div",{className:"absolute inset-0",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-[url('/grid.svg')] opacity-5"}),(0,a.jsx)("div",{className:"absolute right-10 top-1/2 -translate-y-1/2 w-72 h-72 hidden lg:block",children:(0,a.jsxs)("div",{className:"relative w-full h-full",children:[(0,a.jsx)("div",{className:"absolute inset-0 animate-spin-slow",children:(0,a.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 100 100",children:[(0,a.jsx)("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:"2"}),(0,a.jsx)("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"white",strokeWidth:"2",strokeDasharray:"283",strokeDashoffset:"100",className:"transform origin-center rotate-180"})]})}),(0,a.jsx)("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:(0,a.jsx)("div",{className:"relative w-20 h-20",children:[0,1,2,3].map(e=>(0,a.jsx)("div",{className:"absolute w-full h-full rounded-full border-2 border-white/30 bg-white/10 backdrop-blur-sm",style:{animation:"coinFloat 2s ease-in-out ".concat(.2*e,"s infinite"),top:"".concat(-4*e,"px")},children:(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-white font-bold text-xl",children:"₮"})},e))})}),(0,a.jsx)("div",{className:"absolute inset-0 animate-pulse",children:(0,a.jsx)("svg",{className:"w-full h-full",viewBox:"0 0 100 100",children:(0,a.jsx)("path",{d:"M20,80 Q50,20 80,80",fill:"none",stroke:"rgba(255,255,255,0.5)",strokeWidth:"2",className:"animate-draw"})})})]})})]}),(0,a.jsx)("div",{className:"container mx-auto px-4 py-12 sm:py-20 relative",children:(0,a.jsx)("div",{className:"max-w-2xl mx-auto lg:mx-0",children:(0,a.jsxs)("div",{className:"text-center lg:text-left space-y-6 sm:space-y-8",children:[(0,a.jsx)("div",{className:"inline-block px-4 sm:px-6 py-2 sm:py-2.5 bg-[#5856d6]/10 rounded-full",children:(0,a.jsx)("span",{className:"text-sm font-medium text-[#5856d6] whitespace-nowrap",children:"Hemny-тэй хамт хэмнэе."})}),(0,a.jsxs)("h2",{className:"text-3xl sm:text-4xl md:text-6xl font-bold text-gray-900 leading-tight tracking-tight",children:[(0,a.jsx)("span",{className:"inline-block",children:"Та дахиж хэзээ ч"}),(0,a.jsx)("br",{className:"hidden sm:block"}),(0,a.jsx)("span",{className:"bg-gradient-to-r from-[#5856d6] to-blue-500 text-transparent bg-clip-text inline-block",children:"хямдрал, хөнгөлөлтийн мэдээллийг алдахгүй!"})]}),(0,a.jsxs)("p",{className:"text-lg sm:text-xl text-gray-600 leading-relaxed",children:[(0,a.jsx)("span",{className:"inline-block",children:"Таны дуртай байгууллагуудын зарласан"})," ",(0,a.jsx)("span",{className:"font-semibold text-gray-900 inline-block",children:"хямдрал, лояалти,"})," ",(0,a.jsx)("span",{className:"font-semibold text-gray-900 inline-block",children:"cashback, хөнглөлтийн"})," ",(0,a.jsx)("span",{className:"inline-block",children:"мэдээллийг бүгдийг нэг доороос."})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center lg:justify-start pt-6 sm:pt-8",children:[(0,a.jsxs)("div",{className:"flex items-center px-4 sm:px-5 py-2.5 bg-[#5856d6] text-white rounded-full shadow-lg hover:shadow-xl transition-shadow",children:[(0,a.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),(0,a.jsx)("span",{className:"font-medium whitespace-nowrap",children:"Зөв мэдээлэл"})]}),(0,a.jsxs)("div",{className:"flex items-center px-4 sm:px-5 py-2.5 border border-gray-200 rounded-full shadow-lg hover:shadow-xl transition-shadow",children:[(0,a.jsx)("svg",{className:"w-5 h-5 mr-2 text-[#5856d6]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2"})}),(0,a.jsx)("span",{className:"font-medium text-gray-800 whitespace-nowrap",children:"Ухаалаг худалдан авалт"})]})]})]})})})]});var i=t(9206),n=t(6540);let o={primary:"#FF6B6B",secondary:"#4ECDC4",text:{primary:"#2D3436",secondary:"#636E72",light:"#B2BEC3"}},c=e=>{let{isOpen:s,onClose:t,offer_title:r,offer_description:l,start_date:i,end_date:n,Organization:o,CashbackOffer:c,picture_url:d}=e;if(!s)return null;let x=e=>new Date(e).toLocaleDateString("mn-MN",{year:"numeric",month:"long",day:"numeric"});return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-2 sm:p-4",onClick:e=>{e.target===e.currentTarget&&t()},children:(0,a.jsx)("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto mx-2 sm:mx-4",children:(0,a.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsx)("div",{className:"pr-8 flex-1",children:(0,a.jsx)("h2",{className:"text-base sm:text-xl font-semibold text-gray-900 leading-tight break-words",children:r})}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-500 p-1 flex-shrink-0",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"text-sm sm:text-base text-gray-600 leading-relaxed whitespace-pre-line break-words",children:l})}),((null==c?void 0:c.picture_url)||d)&&(0,a.jsx)("div",{className:"transition-all duration-300 ease-in-out transform hover:scale-[1.02]",children:(0,a.jsx)("img",{src:(e=>e?e.startsWith("public/")?e.replace("public/","/"):e:"")((null==c?void 0:c.picture_url)||d),alt:r,className:"w-full h-auto rounded-lg shadow-lg object-contain animate-fade-in",style:{maxHeight:"300px",minHeight:"150px"},onError:e=>{console.error("Image failed to load:",e.target.src),e.target.src="/fallback-image.jpg"}})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-1 sm:mb-2 text-sm sm:text-base",children:"Урамшууллын хугацаа"}),(0,a.jsxs)("p",{className:"text-sm sm:text-base text-gray-600",children:[x(i)," - ",x(n)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-1 sm:mb-2 text-sm sm:text-base",children:"Ерөнхий нөхцөл"}),(0,a.jsx)("div",{className:"text-sm sm:text-base text-gray-600 whitespace-pre-line bg-gray-50 p-3 sm:p-4 rounded-lg",children:null==c?void 0:c.terms_conditions})]})]}),(0,a.jsx)("div",{className:"mt-4 sm:mt-6 flex justify-end",children:(0,a.jsx)("button",{onClick:t,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm sm:text-base transition-colors",children:"Хаах"})})]})})})},d=e=>{var s,t,r,l,i;let[d,x]=(0,n.useState)(!1);return console.log("CashbackOffer:",e.CashbackOffer),console.log("CashbackOffer picture_url:",null===(s=e.CashbackOffer)||void 0===s?void 0:s.picture_url),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"block cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>x(!0),children:[(0,a.jsx)("div",{className:"h-[88px] flex items-center justify-center p-4 rounded-lg",style:{backgroundColor:(null===(r=e.Organization)||void 0===r?void 0:null===(t=r.brand_colors)||void 0===t?void 0:t.primary)||o.secondary,backgroundImage:"linear-gradient(rgba(0, 0, 0, 0.03) 0%, rgba(0, 0, 0, 0) 100%)"},children:(0,a.jsx)("img",{src:(e=>e?e.startsWith("/")?e:"/".concat(e):"")((()=>{var s;return(null===(s=e.Organization)||void 0===s?void 0:s.Logos)&&0!==e.Organization.Logos.length?e.Organization.Logos[0].url:""})()),alt:null===(l=e.Organization)||void 0===l?void 0:l.org_name,className:"max-h-12 w-auto object-contain",loading:"lazy"})}),(0,a.jsx)("div",{className:"mt-3 text-center",children:(0,a.jsxs)("span",{className:"text-[15px] leading-[18px] font-semibold bg-gradient-to-r from-violet-600 to-indigo-600 text-transparent bg-clip-text",children:[null===(i=e.CashbackOffer)||void 0===i?void 0:i.cashback_rate,"% Cash Back"]})})]}),(0,a.jsx)(c,{isOpen:d,onClose:()=>x(!1),...e})]})};var x=t(4335);let m={getStores:async()=>{try{return(await p.get("/offers/cashback/available")).data}catch(e){throw x.A.isAxiosError(e)&&("ECONNREFUSED"===e.code?console.error("Unable to connect to the server. Is it running?"):e.response?console.error("Server responded with:",e.response.status,e.response.data):e.request&&console.error("No response received:",e.message)),console.error("Error fetching cashback stores:",e),e}}},h={getStores:async()=>{try{console.log("Fetching discount stores...");let e=await p.get("offers/discount/available");if(console.log("Response:",e),!e.data)throw Error("No data received from server");return e.data}catch(e){throw x.A.isAxiosError(e)&&("ECONNREFUSED"===e.code?console.error("Unable to connect to the server. Is it running?"):e.response?console.error("Server responded with:",e.response.status,e.response.data):e.request&&console.error("No response received:",e.message)),console.error("Error fetching discount stores:",e),e}}},g={getStores:async()=>{try{console.log("Fetching loyalty stores...");let e=await p.get("offers/loyalty/available");if(console.log("Response:",e),!e.data)throw Error("No data received from server");return e.data}catch(e){throw x.A.isAxiosError(e)&&("ECONNREFUSED"===e.code?console.error("Unable to connect to the server. Is it running?"):e.response?console.error("Server responded with:",e.response.status,e.response.data):e.request&&console.error("No response received:",e.message)),console.error("Error fetching loyalty stores:",e),e}}},u="http://68.183.178.10:5001/api";console.log("API Configuration:"),console.log({NODE_ENV:"production",API_URL:u,NEXT_PUBLIC_BACKEND_URL:"http://68.183.178.10:5001/api",timestamp:new Date().toISOString()});let p=x.A.create({baseURL:u,headers:{"Content-Type":"application/json",Accept:"application/json"},validateStatus:e=>e>=200&&e<300}),v=()=>{var e;let{data:s,isLoading:t,error:r}=(0,i.I)({queryKey:["cashback-stores"],queryFn:m.getStores});if(t)return(0,a.jsx)("section",{className:"py-12 bg-gray-50",children:(0,a.jsxs)("div",{className:"container mx-auto px-4",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-8",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-8 w-64 bg-gray-200 rounded mb-2"}),(0,a.jsx)("div",{className:"h-4 w-96 bg-gray-200 rounded"})]})}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:[...Array(12)].map((e,s)=>(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"bg-gray-200 rounded-lg h-[100px] mb-3"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]},s))})]})});if(r)return(0,a.jsx)("section",{className:"py-12 bg-gray-50",children:(0,a.jsx)("div",{className:"container mx-auto px-4",children:(0,a.jsx)("div",{className:"text-center text-red-600",children:"Failed to load cashback stores. Please try again later."})})});null==s||s.slice(0,18);let l=(null!==(e=null==s?void 0:s.length)&&void 0!==e?e:0)>18;return(0,a.jsxs)("div",{className:"cashback-container",children:[(0,a.jsx)("h1",{style:{color:o.primary,textShadow:"2px 2px 4px rgba(0,0,0,0.1)"}}),(0,a.jsx)("p",{style:{color:o.text.secondary}}),(0,a.jsx)("section",{className:"py-12 bg-gray-50",children:(0,a.jsxs)("div",{className:"container mx-auto px-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Cashback"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Буцаан олголт зарласан байгууллагууд"})]}),l&&(0,a.jsxs)("a",{href:"/stores",className:"inline-flex items-center text-primary hover:text-primary/80 font-medium",children:["See All",(0,a.jsx)("svg",{className:"ml-1 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-[22px]",children:null==s?void 0:s.map(e=>(0,a.jsx)(d,{...e},e.offer_id))})]})})]})},j=e=>{let{image:s,title:t,description:r,link:l,organization:i,loyaltyDetails:n,startDate:o,endDate:c,source_link:d}=e;console.log("LoyaltyCard props:",{image:s,title:t,description:r,link:l,organization:i,loyaltyDetails:n,startDate:o,endDate:c});let x=e=>e?e.startsWith("/")?e:"/".concat(e):"";return(0,a.jsx)("div",{className:"w-1/4 px-4 flex-shrink-0",children:(0,a.jsxs)("div",{onClick:()=>{d&&window.open(d,"_blank","noopener,noreferrer")},className:"block h-full cursor-pointer",children:[(0,a.jsx)("div",{className:"bg-transparent rounded-t-xl shadow-lg overflow-hidden transform transition-transform hover:scale-105",children:(0,a.jsx)("div",{className:"aspect-w-16 aspect-h-8",children:(0,a.jsx)("img",{src:x(s),alt:t,className:"w-full h-full object-cover"})})}),(0,a.jsxs)("div",{className:"mt-4 p-4 bg-transparent",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsx)("img",{src:x(null==i?void 0:i.logo_url),alt:null==i?void 0:i.org_name,className:"w-6 h-6 object-contain mr-2"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:null==i?void 0:i.org_name})]}),(0,a.jsx)("h3",{className:"text-xl font-bold mb-2 text-gray-900",children:t}),(0,a.jsx)("p",{className:"text-base text-gray-600 leading-relaxed mb-2",children:r}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,a.jsx)("p",{className:"font-semibold",children:null==n?void 0:n.loyalty_points}),(0,a.jsx)("p",{children:null==n?void 0:n.membership_requirement}),(0,a.jsxs)("p",{className:"mt-2 text-xs",children:["Valid: ",new Date(o).toLocaleDateString()," - ",new Date(c).toLocaleDateString()]})]})]})]})})},b=()=>{var e;let[s,t]=(0,n.useState)(0),[r,l]=(0,n.useState)(!1),{data:o,isLoading:c,error:d}=(0,i.I)({queryKey:["loyalty-stores"],queryFn:()=>g.getStores(),retry:1,onError:e=>{console.error("Query error:",e)}});console.log("Loyalty stores data:",o);let x=Array.isArray(o)?o:[],m=()=>{t(e=>{var s;return e<(null!==(s=null==o?void 0:o.length)&&void 0!==s?s:0)-4?e+1:0})};if((0,n.useEffect)(()=>{let e;return!r&&(null==o?void 0:o.length)>4&&(e=setInterval(()=>{m()},5e3)),()=>{e&&clearInterval(e)}},[r,o]),c)return(0,a.jsx)("section",{className:"py-12 bg-gray-50",children:(0,a.jsxs)("div",{className:"container mx-auto px-4",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-8",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-8 w-64 bg-gray-200 rounded mb-2"}),(0,a.jsx)("div",{className:"h-4 w-96 bg-gray-200 rounded"})]})}),(0,a.jsx)("div",{className:"flex gap-8",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsxs)("div",{className:"w-1/4 animate-pulse",children:[(0,a.jsx)("div",{className:"bg-gray-200 rounded-xl h-48 mb-4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3 mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},s))})]})});if(d)return(0,a.jsx)("section",{className:"py-12 bg-gray-50",children:(0,a.jsx)("div",{className:"container mx-auto px-4",children:(0,a.jsx)("div",{className:"text-center text-red-600",children:"Failed to load loyalty stores. Please try again later."})})});let h=s<(null!==(e=null==o?void 0:o.length)&&void 0!==e?e:0)-4;return(0,a.jsx)("section",{className:"py-12 bg-gray-50",children:(0,a.jsxs)("div",{className:"container mx-auto px-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Loyalty Program"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loyalty урамшуулал зарласан байгууллагууд"})]}),(null==o?void 0:o.length)>4&&(0,a.jsxs)("a",{href:"/loyalty",className:"inline-flex items-center text-primary hover:text-primary/80 font-medium",children:["See All",(0,a.jsx)("svg",{className:"ml-1 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),(0,a.jsxs)("div",{className:"relative max-w-[1600px] mx-auto",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[(0,a.jsx)("div",{className:"overflow-hidden relative px-4",children:(0,a.jsx)("div",{className:"flex transition-transform duration-500 ease-out",style:{transform:"translateX(-".concat(25*s,"%)")},children:x.map(e=>(0,a.jsx)(j,{image:e.picture_url,title:e.offer_title,description:e.offer_description,link:"/loyalty/".concat(e.offer_id),organization:e.Organization,loyaltyDetails:e.LoyaltyOffer,startDate:e.start_date,endDate:e.end_date,source_link:e.source_link},e.offer_id))})}),s>0&&(0,a.jsx)("button",{onClick:()=>{s>0&&t(e=>e-1)},className:"absolute -left-3 top-1/2 -translate-y-1/2 bg-white rounded-full p-2 shadow-md hover:bg-gray-100 transition-colors z-10","aria-label":"Previous slide",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"#004097",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),h&&(0,a.jsx)("button",{onClick:m,className:"absolute -right-3 top-1/2 -translate-y-1/2 bg-white rounded-full p-2 shadow-md hover:bg-gray-100 transition-colors z-10","aria-label":"Next slide",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"#004097",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})})]})]})})},f=e=>{let{isOpen:s,onClose:t,offer_title:r,offer_description:l,start_date:i,end_date:n,Organization:o,DiscountOffer:c,picture_url:d}=e;if(!s)return null;let x=e=>new Date(e).toLocaleDateString("mn-MN",{year:"numeric",month:"long",day:"numeric"});return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-2 sm:p-4",onClick:e=>{e.target===e.currentTarget&&t()},children:(0,a.jsx)("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto mx-2 sm:mx-4",children:(0,a.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsx)("div",{className:"pr-8 flex-1",children:(0,a.jsx)("h2",{className:"text-base sm:text-xl font-semibold text-gray-900 leading-tight break-words",children:r})}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-500 p-1 flex-shrink-0",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-1 sm:mb-2 text-sm sm:text-base",children:"Хямдралын хэмжээ"}),(0,a.jsxs)("p",{className:"text-lg sm:text-xl font-semibold text-primary",children:[null==c?void 0:c.discount_value,"% Off"]})]}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"text-sm sm:text-base text-gray-600 leading-relaxed whitespace-pre-line break-words",children:l})}),d&&(0,a.jsx)("div",{className:"transition-all duration-300 ease-in-out transform hover:scale-[1.02]",children:(0,a.jsx)("img",{src:(e=>e?e.startsWith("public/")?e.replace("public/","/"):e:"")(d),alt:r,className:"w-full h-auto rounded-lg shadow-lg object-contain animate-fade-in",style:{maxHeight:"300px",minHeight:"150px"},onError:e=>{console.error("Image failed to load:",e.target.src),e.target.src="/fallback-image.jpg"}})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-1 sm:mb-2 text-sm sm:text-base",children:"Урамшууллын хугацаа"}),(0,a.jsxs)("p",{className:"text-sm sm:text-base text-gray-600",children:[x(i)," - ",x(n)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-1 sm:mb-2 text-sm sm:text-base",children:"Ерөнхий нөхцөл"}),(0,a.jsx)("div",{className:"text-sm sm:text-base text-gray-600 whitespace-pre-line bg-gray-50 p-3 sm:p-4 rounded-lg",children:null==c?void 0:c.terms_conditions})]})]}),(0,a.jsx)("div",{className:"mt-4 sm:mt-6 flex justify-end",children:(0,a.jsx)("button",{onClick:t,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 text-sm sm:text-base transition-colors",children:"Хаах"})})]})})})},y=e=>{var s,t,r;let[l,i]=(0,n.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{onClick:e=>{e.stopPropagation(),i(!0)},className:"bg-white rounded-lg shadow-md flex h-24 overflow-hidden hover:shadow-lg transition-all cursor-pointer active:scale-[0.99] active:shadow-sm",children:[(0,a.jsx)("div",{className:"w-24 h-24 flex items-center justify-center p-2",children:(0,a.jsx)("img",{src:(e=>e?e.startsWith("/")?e:"/".concat(e):"")((()=>{var s;return(null===(s=e.Organization)||void 0===s?void 0:s.Logos)&&0!==e.Organization.Logos.length?e.Organization.Logos[0].url:""})()),alt:null===(s=e.Organization)||void 0===s?void 0:s.org_name,className:"max-w-full max-h-full w-auto h-auto object-contain",loading:"lazy"})}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 flex-1",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 font-sans leading-tight line-clamp-1",children:null===(t=e.Organization)||void 0===t?void 0:t.org_name}),(0,a.jsxs)("p",{className:"text-base font-semibold text-gray-700 leading-tight mt-0.5",children:[(e=>{if(!e)return"";if(e.includes("-")){let[s,t]=e.split("-");return"".concat(s,"%-").concat(t,"%")}return"".concat(e,"%")})(null===(r=e.DiscountOffer)||void 0===r?void 0:r.discount_value)," Off"]}),(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-600 leading-tight mt-0.5",children:[(e=>{let s=new Date(e);return"".concat(s.getFullYear()," оны ").concat(["1-р сар","2-р сар","3-р сар","4-р сар","5-р сар","6-р сар","7-р сар","8-р сар","9-р сар","10-р сар","11-р сар","12-р сар"][s.getMonth()]," ").concat(s.getDate())})(e.end_date)," хүртэл"]})]}),(0,a.jsx)("div",{className:"flex items-center pointer-events-none",children:(0,a.jsxs)("span",{className:"text-blue-600 font-medium text-sm group-hover:text-blue-800 transition-colors flex items-center gap-0.5 group",children:["Дэлгэрэнгүй",(0,a.jsx)("svg",{className:"w-3.5 h-3.5 transform group-hover:translate-x-0.5 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})]})})]})]}),l&&(0,a.jsx)(f,{isOpen:l,onClose:()=>i(!1),...e})]})},N=()=>{var e,s;let{data:t,isLoading:r,error:l}=(0,i.I)({queryKey:["discount-stores"],queryFn:()=>h.getStores(),retry:1,onError:e=>{console.error("Query error:",e)}});if(console.log("Stores data:",t),console.log("Loading state:",r),console.log("Error state:",l),r)return(0,a.jsx)("section",{className:"py-12 bg-gray-50",children:(0,a.jsxs)("div",{className:"container mx-auto px-4",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-8",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-8 w-64 bg-gray-200 rounded mb-2"}),(0,a.jsx)("div",{className:"h-4 w-96 bg-gray-200 rounded"})]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-[22px]",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsxs)("div",{className:"animate-pulse bg-white rounded-lg h-24 flex",children:[(0,a.jsx)("div",{className:"w-24 bg-gray-200"}),(0,a.jsxs)("div",{className:"flex-1 p-3",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3 mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]})]},s))})]})});if(l)return(0,a.jsx)("section",{className:"py-12 bg-gray-50",children:(0,a.jsx)("div",{className:"container mx-auto px-4",children:(0,a.jsx)("div",{className:"text-center text-red-600",children:"Failed to load discount stores. Please try again later."})})});let n=null!==(e=null==t?void 0:t.slice(0,4))&&void 0!==e?e:[],o=(null!==(s=null==t?void 0:t.length)&&void 0!==s?s:0)>4;return(0,a.jsx)("section",{className:"py-12 bg-gray-50",children:(0,a.jsxs)("div",{className:"container mx-auto px-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Hot Deals & Discount"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Хямдрал урамшуулал зарласан байгууллагууд"})]}),o&&(0,a.jsxs)("a",{href:"/discount",className:"inline-flex items-center text-primary hover:text-primary/80 font-medium",children:["See All",(0,a.jsx)("svg",{className:"ml-1 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-[22px]",children:n.map(e=>(0,a.jsx)(y,{...e},e.offer_id))})]})})},w=()=>(0,a.jsx)(r.A,{children:(0,a.jsxs)("main",{children:[(0,a.jsx)(l,{}),(0,a.jsx)(v,{}),(0,a.jsx)(N,{}),(0,a.jsx)(b,{})]})})}},e=>{var s=s=>e(e.s=s);e.O(0,[24,636,593,792],()=>s(3792)),_N_E=e.O()}]);